{% extends "base.html" %}
{% block content %}

{% if warning %}
<div class="alert alert-warning" role="alert" align="center">
  {{warning}}
</div>
{% endif %}
  
  {% if user_name %}
  <h1>Welcome {{ user_name }}!!!</h1>
  {% endif %}

  <br>
  <br>

{% if user_storage_files %}
<table class="table table-dark table-striped table-hover">
  <thead>
    <tr>
      <th style="text-align:center" scope="col">File Name</th>
      <th style="text-align:center" scope="col">Download Link</th>
      <th style="text-align:center" scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    {% for app in user_storage_files.items %}
    <tr>
 <td style="text-align:center">{{ app.filename }}</td>
    <td style="text-align:center"><a href="app.file" download="">{{ app.file }}</a></td>

    <td>
      <form  method="POST">
        <input type="hidden" name="delete_filename" value="{{ app.filename }}">
      <input type="submit" onclick="return confirm('Are you sure you want to delete this file?')" value="Delete">
      </form>
    </td>
    </tr>
    {% endfor %}

  </tbody>
</table>

 <nav aria-label="Page navigation example">
     <ul class="pagination justify-content-center">
       {% for page_num in user_storage_files.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
          {% if user_storage_files.page == page_num %}
          <li class="page-item disabled">
            <a class="page-link" href="{{ url_for('users.after_login', page=page_num) }}">{{ page_num }}</a></li>
          {% else %}
            <li class="page-item"><a class="page-link" href="{{ url_for('users.after_login', page=page_num) }}">{{ page_num }}</a></li>
          {% endif %}
      {% endfor %}
    </nav>

{% endif %}


<div class="jumbotron">
  <form method="POST" enctype="multipart/form-data">

    <div class="form-group">
      <label class="control-label">Upload a File</label>
      <div class="custom-file">
        <input type="file" class="custom-file-input" name="file_obj" aria-describedby="inputGroupFileAddon01">
        <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
      </div>
    </div>

    <script>
      // Add the following code if you want the name of the file appear on select
      $(".custom-file-input").on("change", function () {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
      });
    </script>

    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
{% endblock %}